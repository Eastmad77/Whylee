// /scripts/app.js  â€” v9007(() => {  const VERSION = '9007';  // stamp version if you have a footer span#app-version  const vLabel = document.getElementById('app-version');  if (vLabel) vLabel.textContent = `v${VERSION}`;  // online/offline class  function setNetClass() {    document.body.classList.toggle('is-offline', !navigator.onLine);  }  window.addEventListener('online', setNetClass);  window.addEventListener('offline', setNetClass);  setNetClass();  // Service Worker  if ('serviceWorker' in navigator) {    navigator.serviceWorker.register('/service-worker.js?v=' + VERSION, { scope: '/' })      .catch(err => console.warn('[SW] register failed', err));    const promptEl = document.getElementById('updatePrompt');    const btnNow   = document.getElementById('btnUpdateNow');    const btnLater = document.getElementById('btnUpdateLater');    const showPrompt = () => promptEl && (promptEl.style.display = 'block');    const hidePrompt = () => promptEl && (promptEl.style.display = 'none');    if ('BroadcastChannel' in window) {      const ch = new BroadcastChannel('whylee-sw');      ch.onmessage = (ev) => {        if (ev?.data === 'NEW_VERSION') showPrompt();      };    }    if (btnNow) {      btnNow.addEventListener('click', async () => {        hidePrompt();        const regs = await navigator.serviceWorker.getRegistrations();        regs.forEach(r => r.update());        location.reload();      });    }    if (btnLater) btnLater.addEventListener('click', hidePrompt);  }  // Optional install prompt hookup  const btnInstall = document.getElementById('btn-install');  if (btnInstall && window.WhyleeInstall) {    window.addEventListener('beforeinstallprompt', (e) => {      e.preventDefault();      window.WhyleeInstall.setEvent(e);      btnInstall.hidden = false;      btnInstall.addEventListener('click', () => window.WhyleeInstall.confirm());    });  }  const btnRefresh = document.getElementById('btn-refresh');  if (btnRefresh) btnRefresh.addEventListener('click', () => location.reload());  const btnMenu = document.getElementById('btn-menu');  if (btnMenu) btnMenu.addEventListener('click', () => document.body.classList.toggle('menu-open'));})();